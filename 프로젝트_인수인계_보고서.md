# ReBridge 프로젝트 인수인계 보고서

## 1. 프로젝트 개요

### 프로젝트명: ReBridge
**목적**: 정신장애인을 위한 맞춤형 구직 정보 통합 플랫폼

**주요 목표**:
- 여러 채용 사이트의 정보를 자동으로 수집하여 통합 제공
- 장애인 친화적인 채용 공고 우선 표시
- 간편한 검색과 저장 기능 제공

## 2. 기술 스택

### 핵심 기술
- **프레임워크**: Next.js 15.1.0 (App Router)
- **런타임**: Node.js 18+
- **패키지 매니저**: pnpm 9.0.0
- **모노레포**: Turborepo

### 프론트엔드
- **UI 프레임워크**: React 19
- **스타일링**: Tailwind CSS + Shadcn/ui
- **상태관리**: Zustand (전역), TanStack Query v5 (서버)
- **폼 처리**: React Hook Form + Zod
- **애니메이션**: GSAP, Framer Motion, Three.js
- **인증**: NextAuth.js 5.0.0-beta

### 백엔드
- **데이터베이스**: PostgreSQL (Neon)
- **ORM**: Prisma 5.7.0
- **캐시**: Redis (Upstash)
- **큐 시스템**: BullMQ
- **크롤링**: Puppeteer, Playwright, Cheerio
- **스케줄링**: node-cron

### 인프라 및 도구
- **배포**: 로컬 서버 (PM2로 프로세스 관리)
- **외부 접근**: ngrok, Cloudflare Tunnel, 또는 포트포워딩
- **컨테이너**: Docker (PostgreSQL, Redis)
- **모니터링**: Grafana Cloud
- **타입스크립트**: 5.x (완화된 설정)

## 3. 프로젝트 구조

### 모노레포 구조
```
rebridge/
├── apps/
│   ├── web/                # Next.js 웹 애플리케이션
│   └── crawler/            # Node.js 크롤러 서비스
├── packages/
│   ├── database/           # Prisma 스키마 및 클라이언트
│   ├── shared/             # 공용 타입 및 유틸리티
│   └── crawler-adapters/   # 사이트별 크롤러 어댑터
```

### 주요 디렉토리 설명

#### apps/web (웹 애플리케이션)
- `src/app/`: Next.js App Router 페이지 및 API
- `src/components/`: React 컴포넌트 (UI, Three.js 효과)
- `src/lib/`: 유틸리티 및 설정 (auth, redis, prisma)
- `src/hooks/`: 커스텀 React 훅
- `prisma/`: 데이터베이스 스키마

#### apps/crawler (크롤러 서비스)
- `src/index.ts`: 메인 진입점 (BullMQ 워커)
- `src/crawler-manager.ts`: 크롤링 로직 관리
- `src/monitoring.ts`: 모니터링 기능

#### packages
- `database/`: Prisma 클라이언트 공유
- `shared/`: 타입 정의 및 공통 상수
- `crawler-adapters/`: 각 사이트별 크롤러 구현

## 4. 구현된 주요 기능

### 사용자 기능
1. **인증 시스템**
   - 이메일/비밀번호 로그인
   - 카카오 소셜 로그인
   - 회원가입 및 프로필 관리

2. **채용공고 검색**
   - 실시간 통합 검색
   - 필터링 (사이트별, 고용형태별, 지역별)
   - 자동완성 기능
   - 페이지네이션

3. **채용공고 관리**
   - 공고 상세 조회
   - 북마크 저장/해제
   - 저장된 공고 목록 관리

4. **UI/UX 특징**
   - 반응형 디자인
   - 다크모드 지원
   - 3D 배경 효과 (Three.js)
   - 접근성 최적화

### 백엔드 기능
1. **자동 크롤링 시스템**
   - 4개 사이트 지원 (워크투게더, 사람인, 고용24, 잡코리아)
   - 6시간마다 자동 실행
   - 중복 제거 및 데이터 정규화

2. **성능 최적화**
   - Redis 캐싱 (1시간 TTL)
   - 데이터베이스 인덱싱
   - API 속도 제한

3. **모니터링**
   - 크롤링 상태 대시보드
   - 실패율 알림
   - 통계 및 로그

## 5. 데이터베이스 스키마

### 주요 모델
- **User**: 사용자 정보 (이메일, 비밀번호, 장애인 등록 여부)
- **Job**: 채용공고 (제목, 회사, 위치, 급여, 설명 등)
- **UserSavedJob**: 사용자-채용공고 저장 관계
- **CrawlLog**: 크롤링 실행 로그

### 특징
- snake_case DB 필드를 camelCase로 매핑
- PostgreSQL 전문 검색 기능 사용 (tsvector)
- 복합 인덱스로 검색 성능 최적화

## 6. API 엔드포인트

### 인증 관련
- `POST /api/auth/register`: 회원가입
- `GET/POST /api/auth/*`: NextAuth.js 인증

### 채용공고 관련
- `GET /api/jobs`: 채용공고 목록
- `GET /api/jobs/[id]`: 공고 상세
- `POST /api/jobs/[id]/save`: 공고 저장
- `DELETE /api/jobs/[id]/unsave`: 저장 취소
- `GET /api/jobs/search`: 검색
- `GET /api/jobs/autocomplete`: 자동완성

### 사용자 관련
- `GET/PUT /api/user/profile`: 프로필 조회/수정
- `GET /api/user/saved-jobs`: 저장한 공고

### 관리자 관련
- `GET /api/admin/crawl-status`: 크롤링 상태
- `GET /api/monitoring`: 모니터링 데이터

## 7. 환경 설정

### 필수 환경 변수
```env
# 데이터베이스
DATABASE_URL=postgresql://rebridge:rebridge_dev_password@localhost:5432/rebridge_dev?schema=public

# Redis
REDIS_URL=redis://localhost:6379

# NextAuth (프로덕션 시 도메인으로 변경)
NEXTAUTH_URL=http://localhost:3000
NEXTAUTH_SECRET=... # openssl rand -base64 32로 생성

# 앱 URL (외부 접근 시 ngrok/cloudflare URL로 변경)
NEXT_PUBLIC_APP_URL=http://localhost:3000

# OAuth (선택사항)
KAKAO_CLIENT_ID=...
KAKAO_CLIENT_SECRET=...
```

### 로컬 개발 환경 실행
```bash
# 의존성 설치
pnpm install

# Docker 컨테이너 실행 (DB, Redis)
docker-compose up -d

# Prisma 마이그레이션
cd apps/web
npx prisma generate
npx prisma db push

# 개발 서버 실행
pnpm dev        # 전체 실행
pnpm dev:web    # 웹만 실행
pnpm dev:crawler # 크롤러만 실행
```

### 프로덕션 환경 실행 (로컬 서버)
```bash
# 프로덕션 빌드
pnpm build

# PM2로 서비스 시작
pm2 start ecosystem.config.js

# 로그 확인
pm2 logs

# 서비스 상태 확인
pm2 status
```

## 8. 배포

### 현재 배포 구성
- **웹 애플리케이션**: 로컬 서버 (PM2로 관리)
- **크롤러 서비스**: 동일 서버에서 PM2로 실행
- **데이터베이스**: 로컬 PostgreSQL (Docker) 또는 외부 DB
- **캐시**: 로컬 Redis (Docker)
- **외부 접근**: ngrok, Cloudflare Tunnel, 또는 고정 IP + 포트포워딩

### 로컬 서버 배포 프로세스
1. 프로덕션 빌드 생성
```bash
pnpm build
```

2. PM2로 서비스 시작
```bash
pm2 start ecosystem.config.js
pm2 save
pm2 startup
```

3. 외부 접근 설정
```bash
# ngrok 사용 시
ngrok http 3000

# Cloudflare Tunnel 사용 시
cloudflared tunnel --url http://localhost:3000
```

## 9. 주의사항 및 개선사항

### 주의사항
1. **Prisma 클라이언트 생성**: 모노레포에서 빌드 전 반드시 `npx prisma generate` 실행
2. **CSS @import**: globals.css에서 @import는 최상단에 위치해야 함
3. **환경 변수**: 배포 환경별로 올바른 환경 변수 설정 필수

### 개선 가능한 부분
1. **미구현 기능**
   - 커뮤니티 기능
   - 이력서 작성 기능
   - 실시간 알림 시스템

2. **성능 최적화**
   - 이미지 최적화
   - 번들 크기 최적화
   - 서버 사이드 캐싱 강화

3. **코드 품질**
   - 테스트 코드 추가
   - 에러 핸들링 개선
   - 타입 안정성 강화

## 10. 연락처 및 참고자료

### 프로젝트 문서
- `/vooster-docs/prd.md`: 제품 요구사항 문서
- `/vooster-docs/architecture.md`: 아키텍처 문서
- `/CLAUDE.md`: 개발 가이드라인
- `/DEPLOYMENT_GUIDE.md`: 배포 가이드

### 기술 문서
- [Next.js 15 문서](https://nextjs.org/docs)
- [Prisma 문서](https://www.prisma.io/docs)
- [NextAuth.js 문서](https://next-auth.js.org)

---

**작성일**: 2025년 7월 16일  
**프로젝트 버전**: 0.1.0 (MVP)

이 문서는 ReBridge 프로젝트의 현재 상태를 기준으로 작성되었습니다. 프로젝트가 계속 발전함에 따라 내용이 변경될 수 있습니다.